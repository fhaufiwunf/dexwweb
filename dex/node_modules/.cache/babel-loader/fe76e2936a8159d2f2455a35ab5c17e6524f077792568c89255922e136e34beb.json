{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.analyze = void 0;\nconst visitor_keys_1 = require(\"@typescript-eslint/visitor-keys\");\nconst lib_1 = require(\"./lib\");\nconst referencer_1 = require(\"./referencer\");\nconst ScopeManager_1 = require(\"./ScopeManager\");\nconst DEFAULT_OPTIONS = {\n  childVisitorKeys: visitor_keys_1.visitorKeys,\n  ecmaVersion: 2018,\n  globalReturn: false,\n  impliedStrict: false,\n  jsxPragma: 'React',\n  jsxFragmentName: null,\n  lib: ['es2018'],\n  sourceType: 'script',\n  emitDecoratorMetadata: false\n};\n/**\n * Convert ecmaVersion to lib.\n * `'latest'` is converted to 1e8 at parser.\n */\nfunction mapEcmaVersion(version) {\n  if (version == null || version === 3 || version === 5) {\n    return 'es5';\n  }\n  const year = version > 2000 ? version : 2015 + (version - 6);\n  const lib = `es${year}`;\n  return lib in lib_1.lib ? lib : year > 2020 ? 'esnext' : 'es5';\n}\n/**\n * Takes an AST and returns the analyzed scopes.\n */\nfunction analyze(tree, providedOptions) {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  const ecmaVersion = (_a = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.ecmaVersion) !== null && _a !== void 0 ? _a : DEFAULT_OPTIONS.ecmaVersion;\n  const options = {\n    childVisitorKeys: (_b = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.childVisitorKeys) !== null && _b !== void 0 ? _b : DEFAULT_OPTIONS.childVisitorKeys,\n    ecmaVersion,\n    globalReturn: (_c = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.globalReturn) !== null && _c !== void 0 ? _c : DEFAULT_OPTIONS.globalReturn,\n    impliedStrict: (_d = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.impliedStrict) !== null && _d !== void 0 ? _d : DEFAULT_OPTIONS.impliedStrict,\n    jsxPragma: (providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.jsxPragma) === undefined ? DEFAULT_OPTIONS.jsxPragma : providedOptions.jsxPragma,\n    jsxFragmentName: (_e = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.jsxFragmentName) !== null && _e !== void 0 ? _e : DEFAULT_OPTIONS.jsxFragmentName,\n    sourceType: (_f = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.sourceType) !== null && _f !== void 0 ? _f : DEFAULT_OPTIONS.sourceType,\n    lib: (_g = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.lib) !== null && _g !== void 0 ? _g : [mapEcmaVersion(ecmaVersion)],\n    emitDecoratorMetadata: (_h = providedOptions === null || providedOptions === void 0 ? void 0 : providedOptions.emitDecoratorMetadata) !== null && _h !== void 0 ? _h : DEFAULT_OPTIONS.emitDecoratorMetadata\n  };\n  // ensure the option is lower cased\n  options.lib = options.lib.map(l => l.toLowerCase());\n  const scopeManager = new ScopeManager_1.ScopeManager(options);\n  const referencer = new referencer_1.Referencer(options, scopeManager);\n  referencer.visit(tree);\n  return scopeManager;\n}\nexports.analyze = analyze;","map":{"version":3,"mappings":";;;;;;AACA;AAEA;AAEA;AACA;AAoEA,MAAMA,eAAe,GAA6B;EAChDC,gBAAgB,EAAEC,0BAAW;EAC7BC,WAAW,EAAE,IAAI;EACjBC,YAAY,EAAE,KAAK;EACnBC,aAAa,EAAE,KAAK;EACpBC,SAAS,EAAE,OAAO;EAClBC,eAAe,EAAE,IAAI;EACrBC,GAAG,EAAE,CAAC,QAAQ,CAAC;EACfC,UAAU,EAAE,QAAQ;EACpBC,qBAAqB,EAAE;CACxB;AAED;;;;AAIA,SAASC,cAAcA,CAACC,OAAsC;EAC5D,IAAIA,OAAO,IAAI,IAAI,IAAIA,OAAO,KAAK,CAAC,IAAIA,OAAO,KAAK,CAAC,EAAE;IACrD,OAAO,KAAK;;EAGd,MAAMC,IAAI,GAAGD,OAAO,GAAG,IAAI,GAAGA,OAAO,GAAG,IAAI,IAAIA,OAAO,GAAG,CAAC,CAAC;EAC5D,MAAMJ,GAAG,GAAG,KAAKK,IAAI,EAAE;EAEvB,OAAOL,GAAG,IAAIM,SAAW,GAAIN,GAAW,GAAGK,IAAI,GAAG,IAAI,GAAG,QAAQ,GAAG,KAAK;AAC3E;AAEA;;;AAGA,SAASE,OAAOA,CACdC,IAAmB,EACnBC,eAAgC;;EAEhC,MAAMd,WAAW,GACf,qBAAe,aAAfc,eAAe,uBAAfA,eAAe,CAAEd,WAAW,mCAAIH,eAAe,CAACG,WAAW;EAC7D,MAAMe,OAAO,GAA6B;IACxCjB,gBAAgB,EACd,qBAAe,aAAfgB,eAAe,uBAAfA,eAAe,CAAEhB,gBAAgB,mCAAID,eAAe,CAACC,gBAAgB;IACvEE,WAAW;IACXC,YAAY,EAAE,qBAAe,aAAfa,eAAe,uBAAfA,eAAe,CAAEb,YAAY,mCAAIJ,eAAe,CAACI,YAAY;IAC3EC,aAAa,EACX,qBAAe,aAAfY,eAAe,uBAAfA,eAAe,CAAEZ,aAAa,mCAAIL,eAAe,CAACK,aAAa;IACjEC,SAAS,EACP,gBAAe,aAAfW,eAAe,uBAAfA,eAAe,CAAEX,SAAS,MAAKa,SAAS,GACpCnB,eAAe,CAACM,SAAS,GACzBW,eAAe,CAACX,SAAS;IAC/BC,eAAe,EACb,qBAAe,aAAfU,eAAe,uBAAfA,eAAe,CAAEV,eAAe,mCAAIP,eAAe,CAACO,eAAe;IACrEE,UAAU,EAAE,qBAAe,aAAfQ,eAAe,uBAAfA,eAAe,CAAER,UAAU,mCAAIT,eAAe,CAACS,UAAU;IACrED,GAAG,EAAE,qBAAe,aAAfS,eAAe,uBAAfA,eAAe,CAAET,GAAG,mCAAI,CAACG,cAAc,CAACR,WAAW,CAAC,CAAC;IAC1DO,qBAAqB,EACnB,qBAAe,aAAfO,eAAe,uBAAfA,eAAe,CAAEP,qBAAqB,mCACtCV,eAAe,CAACU;GACnB;EAED;EACAQ,OAAO,CAACV,GAAG,GAAGU,OAAO,CAACV,GAAG,CAACY,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,WAAW,EAAS,CAAC;EAE1D,MAAMC,YAAY,GAAG,IAAIC,2BAAY,CAACN,OAAO,CAAC;EAC9C,MAAMO,UAAU,GAAG,IAAIC,uBAAU,CAACR,OAAO,EAAEK,YAAY,CAAC;EAExDE,UAAU,CAACE,KAAK,CAACX,IAAI,CAAC;EAEtB,OAAOO,YAAY;AACrB;AAESK","names":["DEFAULT_OPTIONS","childVisitorKeys","visitor_keys_1","ecmaVersion","globalReturn","impliedStrict","jsxPragma","jsxFragmentName","lib","sourceType","emitDecoratorMetadata","mapEcmaVersion","version","year","lib_1","analyze","tree","providedOptions","options","undefined","map","l","toLowerCase","scopeManager","ScopeManager_1","referencer","referencer_1","visit","exports"],"sources":["../src/analyze.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}